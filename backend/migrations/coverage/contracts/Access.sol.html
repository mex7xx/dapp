<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/Access.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> Access.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/10</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.6.3;
&nbsp;
/*
AccessControll stellt Modifier (access) für externe Smart-Contract Funktionen bereit die zugriffsgeschützt sein sollen. Wie in Ethereum üblich werden die Ethereum-Adressen als Kennung für die Nutzer verwendet. 
Es lassen sich verschiede Rollen den einzelnen Adressen zuweisen. Bei einer mit dem Modifier access versehenen Funktion wird geprüft ob die Adresse die benötigten Zugriffsrechte zugewiesen bekommen hat ansonsten wird die Transaktion rückgängig gemacht.
*/
&nbsp;
contract AccessControl {
&nbsp;
    // 
    mapping(address =&gt; mapping(uint =&gt; bool)) associatedRoles;      //  (addr, role) =&gt; associated  // TODO: Register Function &amp; Check what happens if not in map.
&nbsp;
    // TODO: Make to function to provide contract as Lib // new modifier in 
<span class="fstat-no" title="function not covered" >    modifier access(uint[] memory allowedRoles) {</span>
<span class="cstat-no" title="statement not covered" >        bool allowed = false;</span>
<span class="cstat-no" title="statement not covered" >        for(uint i = 0; i &lt; allowedRoles.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            if (hasRole(allowedRoles[i], msg.sender)) {</span>
<span class="cstat-no" title="statement not covered" >                allowed = true</span>;
                break;
            }
        }
<span class="cstat-no" title="statement not covered" >        require(allowed, "no access rights")</span>;
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function addRole(uint _role, address _to) internal {</span>
<span class="cstat-no" title="statement not covered" >        associatedRoles[_to][_role] = true</span>;
    }
<span class="fstat-no" title="function not covered" >    function removeRole(uint _role, address _from) internal {</span>
<span class="cstat-no" title="statement not covered" >        associatedRoles[_from][_role] = false</span>;
    }
<span class="fstat-no" title="function not covered" >    function hasRole(uint _role, address _add) public view returns(bool) {</span>
<span class="cstat-no" title="statement not covered" >        return associatedRoles[_add][_role];</span>
    }
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri May 21 2021 19:25:25 GMT+0200 (Mitteleuropäische Sommerzeit)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
